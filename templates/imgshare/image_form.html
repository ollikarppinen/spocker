{% extends "base.html" %}

{% block head_title %}
 | Upload
{% endblock head_title %}

{% block content %}

  <div class="panel panel-default">

    <div class="panel-heading">
        <div class="text-align-center">
          <h4>Upload</h4>
        </div>
    </div>

    <div class="panel-body">
      <div class="row">
        <div class="col-xs-4"></div>
        <div class="col-xs-4">
          <form action="" method="post">
            <div class="input-group">
              {% csrf_token %}
                {{ form.as_table }}
              <span class="input-group-button">
                <button type="submit" class="btn-sm btn-success">Save</button>
              </span>
            </div>
          </form>
        </div>
        <div class="col-xs-4"></div>
      </div>
    </div>
  </div>

  <script>
    (function() {
        uploadcare.start();

        var widget = uploadcare.Widget('#id_image');
        widget.openDialog();
        widget.onChange(function(file) {
            if (file) {
                var form = document.getElementById('upload-form');
                form.submit();
                form.style.display = 'none';
            }
        });
    })();
  </script>

{% endblock content %}
